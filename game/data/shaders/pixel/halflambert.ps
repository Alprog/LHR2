
varying vec2 v_texCoord;

uniform sampler2D colorTexture;
uniform sampler2D normalTexture;
uniform sampler2D wrapTexture;
uniform vec3 lightPosition;

void main()
{	
    vec4 albedo = texture2D(colorTexture, v_texCoord);
    vec3 normal = texture2D(normalTexture, v_texCoord).rgb * 2 - 1;
    
    //normalize(lightPosition)
    
    vec3 lightDir = normalize(lightPosition);
    
    float d = dot(normal, lightDir) / 2 + 0.5;
    vec4 diffuse = texture2D(wrapTexture, vec2(d, 0));
    
    vec4 color = albedo * diffuse;
    
    gl_FragColor = color;
}


    