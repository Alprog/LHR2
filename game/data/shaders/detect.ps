
varying vec2 v_texCoord1;
varying vec2 v_texCoord2;

uniform sampler2D mainTexture;

uniform float opacity;
uniform float borderShape; // 0 - circle, 1 - square
uniform float borderWidth; 
uniform float borderShift; // 0 - outer, 1 - inner

void main()
{	
	vec4 tex = texture2D(mainTexture, v_texCoord1);
	
	vec2 t = abs(0.5 - v_texCoord2.xy);
	float k = mix(sqrt(t.x * t.x + t.y * t.y), max(t.x, t.y), borderShape);
	k = (k * 2.0 - 1.0) / borderWidth + borderShift;
	k = 1.0 - clamp(k, 0.0, 1.0);
	
	tex.a = k * opacity;
			
	gl_FragColor = tex;
}
